{"version":3,"file":"file-upload.component.js","sourceRoot":"","sources":["file-upload.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAAkC,eAAe,CAAC,CAAA;AAClD,6BAA4B,cAAc,CAAC,CAAA;AAC3C,wCAAkC,0CAA0C,CAAC,CAAA;AAS7E;IAQE,6BAAmB,EAAc;QAAd,OAAE,GAAF,EAAE,CAAY;QANjC,YAAO,GAAW;YAChB,GAAG,EAAE,sCAAsC,CAAC,QAAQ;SACrD,CAAC;QACF,mBAAc,GAAW,CAAC,CAAC;QAC3B,uBAAkB,GAAU,EAAE,CAAC;QAG7B,IAAI,CAAC,IAAI,GAAG,IAAI,aAAM,CAAC,EAAE,oBAAoB,EAAE,KAAK,EAAE,CAAC,CAAC;IAC1D,CAAC;IAED,8CAAgB,GAAhB,UAAiB,IAAI;QAArB,iBAkBC;QAjBC,IAAI,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,EAAhB,CAAgB,CAAC,CAAC;QACrE,EAAE,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACjB,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrC,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;gBACZ,KAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;YACxC,CAAC,CAAC,CAAC;QACL,CAAC;QAED,IAAI,KAAK,GAAG,CAAC,EAAE,QAAQ,GAAG,CAAC,CAAC;QAC5B,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,UAAA,IAAI;YAClC,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;YAC7B,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;QACnC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC;IAC7D,CAAC;IArCH;QAAC,gBAAS,CAAC;YACT,QAAQ,EAAE,MAAM,CAAC,EAAE;YACnB,QAAQ,EAAE,iBAAiB;YAC3B,WAAW,EAAE,4BAA4B;YACzC,SAAS,EAAE,CAAC,2BAA2B,CAAC;YACxC,UAAU,EAAE,CAAC,2CAAiB,CAAC;SAChC,CAAC;;2BAAA;IAiCF,0BAAC;AAAD,CAAC,AAhCD,IAgCC;AAhCY,2BAAmB,sBAgC/B,CAAA","sourcesContent":["import { Component, NgZone } from '@angular/core';\r\nimport { AngularFire } from 'angularfire2';\r\nimport { UPLOAD_DIRECTIVES } from '../file-uploader/file-uploader.component';\r\n\r\n@Component({\r\n  moduleId: module.id,\r\n  selector: 'app-file-upload',\r\n  templateUrl: 'file-upload.component.html',\r\n  styleUrls: ['file-upload.component.css'],\r\n  directives: [UPLOAD_DIRECTIVES]\r\n})\r\nexport class FileUploadComponent {\r\n  zone: NgZone;\r\n  options: Object = {\r\n    url: 'http://ng2-uploader.com:10050/upload' // TODO!\r\n  };\r\n  uploadProgress: number = 0;\r\n  fileUploadResponse: any[] = [];\r\n\r\n  constructor(public af:AngularFire) {\r\n    this.zone = new NgZone({ enableLongStackTrace: false });\r\n  }\r\n\r\n  handleDropUpload(data):void {\r\n    let index = this.fileUploadResponse.findIndex(x => x.id === data.id);\r\n    if (index === -1) {\r\n      this.fileUploadResponse.push(data);\r\n    }\r\n    else {\r\n      this.zone.run(() => {\r\n        this.fileUploadResponse[index] = data;\r\n      });\r\n    }\r\n\r\n    let total = 0, uploaded = 0;\r\n    this.fileUploadResponse.forEach(resp => {\r\n      total += resp.progress.total;\r\n      uploaded += resp.progress.loaded;\r\n    });\r\n\r\n    this.uploadProgress = Math.floor(uploaded / (total / 100));\r\n  }\r\n\r\n}\r\n"]}